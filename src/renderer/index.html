<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PalamBlock Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="css/tabs.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/menu.css" rel="stylesheet">
    <link href="css/views.css" rel="stylesheet">
    <link href="css/sidebar.css" rel="stylesheet">
    <link href="css/grid.css" rel="stylesheet">
    <link href="css/home.css" rel="stylesheet">
    <link href="css/toast.css" rel="stylesheet">
    <link rel="icon" href="images/pbicon.ico" type="image/x-icon">
</head>

<body>

    <!-- Modal Login -->
    <div aria-hidden="true" aria-labelledby="loginModalLabel" class="modal fade" id="loginModal" role="dialog"
        tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">
                        <img src="images/palamblock-logo.png" width="24" height="24" class="me-2" alt="PalamBlock">
                        Autenticació PalamBlock
                    </h5>
                </div>
                <div class="modal-body">
                    <div id="loginAlert" class="alert alert-danger d-none" role="alert">
                        <strong>Error:</strong> <span id="loginErrorMessage"></span>
                    </div>
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="serverUrl" class="form-label">Servidor PalamSRV</label>
                            <input type="url" class="form-control" id="serverUrl" placeholder="http://localhost:3000"
                                required>
                            <div class="form-text">URL del servidor PalamSRV (ex: http://192.168.1.100:3000)</div>
                        </div>
                        <div class="mb-3">
                            <label for="username" class="form-label">Usuari</label>
                            <input type="text" class="form-control" id="username" placeholder="admin" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Contrasenya</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberCredentials">
                            <label class="form-check-label" for="rememberCredentials">Recordar credencials</label>
                        </div>
                    </form>
                    <div id="loginSpinner" class="text-center d-none">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Connectant...</span>
                        </div>
                        <p class="mt-2">Connectant amb el servidor...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" id="testConnectionBtn">Prova
                        connexió</button>
                    <button type="submit" form="loginForm" class="btn btn-primary" id="loginBtn">Connecta</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal confirmació -->
    <div class="modal fade" tabindex="-1" role="dialog" id="pbk_modal_confirmacio">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Mans enlaire! N'estàs segur?</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <div id="pbk_modal_confirmacio_missatge" class="modal-message">Modal body text goes here.</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="pbk_modal_confirmacio_dacord">Continua</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel·la</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenidor únic de vistes -->
    <main id="appMain" class="pbk-main-container"></main>

    <!-- Modal Llista Blanca (ported from legacy web) -->
    <div aria-hidden="true" aria-labelledby="llistaBlancaModal" class="modal fade text-left" id="llistaBlancaModal"
        tabindex="-1">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pbk_modal_llistablanca_title">Llista blanca per <span
                            id="llb-nomgrup">GRUP</span></h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <div id="llb-weblist-container" class="d-none">
                                <label for="llb-weblist">Llista blanca</label>
                                <div id="llb-weblist"></div>
                            </div>
                            <label>Afegeix</label>
                            <div class="row-input">
                                <input type="text" class="form-control" id="llb-webpage-input"
                                    placeholder="Introdueix la URL del lloc web" />
                                <button class="btn btn-primary" type="button"
                                    id="llb-webpage-input-button">Afegeix</button>
                            </div>
                            <div class="row-input mt-2">
                                <input type="text" class="form-control" id="llb-webtitle-input"
                                    placeholder="Introdueix una cerca al títol" />
                                <button class="btn btn-primary" type="button"
                                    id="llb-webtitle-input-button">Afegeix</button>
                            </div>
                            <label class="mt-3">Llocs habituals</label>
                            <div>
                                <div class="row row-cols-2 g-1" id="llb-common"></div>
                            </div>
                            <br />
                            <label>Durada</label>
                            <div>
                                <div>
                                    <select id="llb-durada" class="form-control round"></select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div id="pbk_modal_llistablanca"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tancar</button>
                    <button type="button" class="btn btn-primary" id="llb-confirma">Confirma i afegeix</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
        integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/ext/bootbox.all.min.js"></script>

    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

    <!-- Chrome tabs (draggabilly per tabs) -->
    <script src="https://unpkg.com/draggabilly@2.2.0/dist/draggabilly.pkgd.min.js"></script>
    <script src="js/views/browsers/tabs.js"></script>

    <!-- Punt d'entrada principal de l'aplicació (ESM) -->
    <script type="module" src="js/main.js"></script>

</body>

</html>